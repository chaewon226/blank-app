# Streamlit ìœ„ì ¯ ì˜ˆì‹œ í˜ì´ì§€ (í•™ìŠµìš©)
import streamlit as st
import pandas as pd
import numpy as np
from datetime import date, datetime, time
from PIL import Image, ImageDraw
import io

# í˜ì´ì§€ ì œëª©
st.title("ğŸˆ Streamlit ìš”ì†Œ ì˜ˆì‹œ ëª¨ìŒ")

# ê°„ë‹¨í•œ ì„¤ëª… í…ìŠ¤íŠ¸
st.write("ì´ í˜ì´ì§€ëŠ” Streamlitì—ì„œ í•œ í˜ì´ì§€ì— ë„£ì„ ìˆ˜ ìˆëŠ” ë‹¤ì–‘í•œ ìš”ì†Œë“¤ì„ ì˜ˆì‹œì™€ í•¨ê»˜ ë³´ì—¬ì¤ë‹ˆë‹¤.")

################################################################################
# ê¸°ë³¸ í…ìŠ¤íŠ¸ ì¶œë ¥
################################################################################

# ì¼ë°˜ í…ìŠ¤íŠ¸ ì¶œë ¥: `st.write`ëŠ” ê°€ì¥ ìì£¼ ì“°ì´ëŠ” ì¶œë ¥ í•¨ìˆ˜ì…ë‹ˆë‹¤.
st.header("ê¸°ë³¸ í…ìŠ¤íŠ¸")
st.write("`st.write`ëŠ” ìë™ìœ¼ë¡œ íƒ€ì…ì„ ì¶”ë¡ í•´ ì ì ˆíˆ ë Œë”ë§í•©ë‹ˆë‹¤.")
st.markdown("- `st.markdown`ìœ¼ë¡œ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ì¶œë ¥ ê°€ëŠ¥")
st.code("print('hello world')  # `st.code`ëŠ” ì½”ë“œ ë¸”ë¡ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.")

################################################################################
# ë ˆì´ì•„ì›ƒ: ì—´(columns), expander, tabs
################################################################################

st.header("ë ˆì´ì•„ì›ƒ: Columns / Expander / Tabs")
cols = st.columns(3)
# ê° ì—´ì— ìœ„ì ¯ì„ ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
cols[0].button("ì™¼ìª½ ë²„íŠ¼")  # ë²„íŠ¼ì€ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
cols[1].checkbox("ê°€ìš´ë° ì²´í¬ë°•ìŠ¤")
cols[2].radio("ì˜¤ë¥¸ìª½ ë¼ë””ì˜¤", options=["ì˜µì…˜ A", "ì˜µì…˜ B"]) 

with st.expander("ì ‘ì„ ìˆ˜ ìˆëŠ” ì˜ì—­ (Expander)"):
    st.write("ì—¬ê¸°ì— ê¸´ ì„¤ëª…ì´ë‚˜ ì˜ˆì‹œ ì½”ë“œë¥¼ ë„£ì–´ë‘ë©´ í¸ë¦¬í•©ë‹ˆë‹¤.")

tab1, tab2 = st.tabs(["íƒ­ 1", "íƒ­ 2"])
with tab1:
    st.write("íƒ­ 1ì˜ ë‚´ìš©")
with tab2:
    st.write("íƒ­ 2ì˜ ë‚´ìš©")

################################################################################
# ì…ë ¥ ìœ„ì ¯: text_input, number_input, date_input, time_input, file_uploader
################################################################################

st.header("ì…ë ¥ ìœ„ì ¯ ì˜ˆì‹œ")
text = st.text_input("ë¬¸ìì—´ ì…ë ¥", value="ì•ˆë…•í•˜ì„¸ìš”")
st.write("ì…ë ¥í•œ í…ìŠ¤íŠ¸:", text)

num = st.number_input("ìˆ«ì ì…ë ¥", min_value=0, max_value=100, value=10)
st.write("ì…ë ¥í•œ ìˆ«ì:", num)

date_val = st.date_input("ë‚ ì§œ ì„ íƒ", value=date.today())
time_val = st.time_input("ì‹œê°„ ì„ íƒ", value=time(hour=12, minute=0))
st.write("ì„ íƒí•œ ì‹œê°:", date_val, time_val)

uploaded_file = st.file_uploader("íŒŒì¼ ì—…ë¡œë“œ (ì´ë¯¸ì§€/CSV ë“±)")
if uploaded_file is not None:
    # ì—…ë¡œë“œëœ íŒŒì¼ì€ BytesIOë¡œ ë°›ì„ ìˆ˜ ìˆê³ , ì´ë¯¸ì§€/ë°ì´í„°í”„ë ˆì„ ë“±ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    st.write("ì—…ë¡œë“œëœ íŒŒì¼ ì´ë¦„:", uploaded_file.name)
    try:
        df = pd.read_csv(uploaded_file)
        st.dataframe(df.head())
    except Exception:
        st.write("CSVê°€ ì•„ë‹Œ íŒŒì¼ì´ê±°ë‚˜, ì´ë¯¸ì§€ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¡œ ì‹œë„í•´ë´…ë‹ˆë‹¤.")
        try:
            image = Image.open(uploaded_file)
            st.image(image, caption="ì—…ë¡œë“œëœ ì´ë¯¸ì§€")
        except Exception:
            st.write("ë¯¸ë¦¬ë³´ê¸° ë¶ˆê°€í•œ íŒŒì¼ì…ë‹ˆë‹¤.")

################################################################################
# ì„ íƒ ìœ„ì ¯: selectbox, multiselect, sliders
################################################################################

st.header("ì„ íƒ ìœ„ì ¯")
option = st.selectbox("Selectbox ì˜ˆì‹œ", ["ì‚¬ê³¼", "ë°”ë‚˜ë‚˜", "ì²´ë¦¬"])  # ë‹¨ì¼ ì„ íƒ
options = st.multiselect("Multiselect ì˜ˆì‹œ", ["íŒŒì´ì¬", "ìë°”ìŠ¤í¬ë¦½íŠ¸", "C++"], default=["íŒŒì´ì¬"])  # ë‹¤ì¤‘ ì„ íƒ
st.write("ì„ íƒëœ ì˜µì…˜:", option, options)

slider = st.slider("ìŠ¬ë¼ì´ë” ì˜ˆì‹œ", 0, 100, (25, 75))  # ë²”ìœ„ ìŠ¬ë¼ì´ë”
st.write("ì„ íƒëœ ë²”ìœ„:", slider)

################################################################################
# ì¸í„°ë™í‹°ë¸Œ ì»¨íŠ¸ë¡¤: ë²„íŠ¼ê³¼ ìƒíƒœê´€ë¦¬(session_state)
################################################################################

st.header("ë²„íŠ¼ê³¼ ìƒíƒœ ê´€ë¦¬")
if 'count' not in st.session_state:
    st.session_state.count = 0

def increment():
    st.session_state.count += 1

st.button("ì¹´ìš´íŠ¸ ì¦ê°€", on_click=increment)
st.write("ì¹´ìš´íŠ¸ê°’:", st.session_state.count)

################################################################################
# í¼(Form) ì˜ˆì‹œ: ì—¬ëŸ¬ ì…ë ¥ì„ ë¬¶ì–´ ì œì¶œ
################################################################################

st.header("í¼ ì˜ˆì‹œ")
with st.form("my_form"):
    name = st.text_input("ì´ë¦„")
    age = st.number_input("ë‚˜ì´", 0, 120, 30)
    submitted = st.form_submit_button("ì œì¶œ")
    # í¼ ë‚´ë¶€ì—ì„œëŠ” ì œì¶œ ë²„íŠ¼ì´ ëˆŒë¦° ë‹¤ìŒì— ê°’ì´ ìœ íš¨í™”ë©ë‹ˆë‹¤.
if submitted:
    st.success(f"ì œì¶œ ì™„ë£Œ: ì´ë¦„={name}, ë‚˜ì´={age}")

################################################################################
# ë¯¸ë””ì–´: ì´ë¯¸ì§€, ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤
################################################################################

st.header("ë¯¸ë””ì–´")
# ì˜ˆì‹œìš©ìœ¼ë¡œ ê°„ë‹¨í•œ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•´ ë³´ì—¬ì¤ë‹ˆë‹¤.
img = Image.new('RGB', (200, 100), color=(73, 109, 137))
draw = ImageDraw.Draw(img)
draw.text((10, 40), "Sample Image", fill=(255, 255, 0))
st.image(img, caption="í”„ë¡œê·¸ë¨ ìƒì„± ì´ë¯¸ì§€")

# ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ëŠ” ì™¸ë¶€ íŒŒì¼ì´ë‚˜ URLì„ ë„£ì–´ ì¬ìƒ ê°€ëŠ¥
# st.audio(audio_bytes)  # bytes ë˜ëŠ” íŒŒì¼ ê²½ë¡œ
# st.video(video_url_or_bytes)

################################################################################
# ë°ì´í„° í‘œì‹œ: dataframe, table, json, metrics
################################################################################

st.header("ë°ì´í„° í‘œì‹œ")
df = pd.DataFrame(np.random.randn(10, 3), columns=["a", "b", "c"])
st.dataframe(df)  # ì¸í„°ë™í‹°ë¸Œí•œ ë°ì´í„°í”„ë ˆì„ ë·°
st.table(df.head(5))  # ì •ì  í…Œì´ë¸”
st.json({"name": "streamlit", "type": "example"})

# Metric: KPI ê°™ì€ ìˆ«ìë¥¼ ë³´ì—¬ì¤„ ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.
col1, col2, col3 = st.columns(3)
col1.metric("ì˜¨ë„", "21Â°C", "1.2Â°C")
col2.metric("ì†ë„", "120 km/h", "-5 km/h")
col3.metric("ì„±ì¥ë¥ ", "2%", "0.1%")

################################################################################
# ì°¨íŠ¸: line_chart, bar_chart, area_chart, matplotlib, altair ë“±
################################################################################

st.header("ì°¨íŠ¸ ì˜ˆì‹œ")
chart_data = pd.DataFrame(np.random.randn(20, 3), columns=["x", "y", "z"]).cumsum()
st.line_chart(chart_data)
st.bar_chart(chart_data)

################################################################################
# ì§€ì—°/ìºì‹œ ì˜ˆì‹œ: @st.cache_data ì‚¬ìš©ë²•
################################################################################

@st.cache_data
def expensive(n):
    # ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê³„ì‚°ì„ í‰ë‚´ë‚´ê¸° ìœ„í•´ ë‚œìˆ˜ í‘œ ìƒì„±
    return np.random.randn(n, n)

st.header("ìºì‹œ ì˜ˆì‹œ")
if st.button("ìºì‹œëœ ê³„ì‚° ì‹¤í–‰ (expensive)"):
    mat = expensive(100)
    st.write("ê³„ì‚°ëœ í–‰ë ¬ shape:", mat.shape)

################################################################################
# ì§„í–‰ í‘œì‹œ: progress, spinner
################################################################################

st.header("ì§„í–‰ ìƒíƒœ í‘œì‹œ")
if st.button("ë‹¤ìš´ë¡œë“œ ì‹œì‘ ì‹œë®¬ë ˆì´ì…˜"):
    with st.spinner("ë‹¤ìš´ë¡œë“œ ì¤‘..."):
        import time
        for i in range(101):
            time.sleep(0.01)
            st.progress(i)
    st.success("ë‹¤ìš´ë¡œë“œ ì™„ë£Œ")

################################################################################
# ì‚¬ì´ë“œë°” ì˜ˆì‹œ
################################################################################

st.sidebar.header("ì‚¬ì´ë“œë°” ì˜ˆì‹œ")
sb_option = st.sidebar.selectbox("ì‚¬ì´ë“œë°” ì„ íƒ", ["ì˜µì…˜1", "ì˜µì…˜2"]) 
st.sidebar.write("ì„ íƒ:", sb_option)

################################################################################
# ë§ˆë¬´ë¦¬ ì•ˆë‚´
################################################################################

st.markdown("---")
st.write("ì´ ì˜ˆì œëŠ” Streamlitì˜ ì£¼ìš” ìš”ì†Œë“¤ì„ í•œ í˜ì´ì§€ì— ëª¨ì•„ë‘” í•™ìŠµìš© ìƒ˜í”Œì…ë‹ˆë‹¤.")
st.write("ì£¼ì„ì„ ë³´ê³  ê° ìœ„ì ¯ì˜ ì‚¬ìš©ë²•ì„ ì§ì ‘ ìˆ˜ì •, ì‹¤í–‰í•´ ë³´ì„¸ìš”.")

# íŒŒì¼ ë
